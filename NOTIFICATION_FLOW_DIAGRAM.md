# ğŸ”” Notification System Flow Diagram

## ğŸ“Š Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DigiGyan LMS                                â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              User Settings Page                          â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  Notification Preferences:                               â”‚   â”‚
â”‚  â”‚  â€¢ Reminders: [ON]                                       â”‚   â”‚
â”‚  â”‚  â€¢ Timing: [1 day before â–¼]                             â”‚   â”‚
â”‚  â”‚  â€¢ Email: [ON]                                           â”‚   â”‚
â”‚  â”‚  â€¢ Push: [ON]                                            â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚             [Save Changes]                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                     â”‚                                             â”‚
â”‚                     â†“                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     POST /api/notifications/preferences                 â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚     {                                                     â”‚   â”‚
â”‚  â”‚       reminders_enabled: true,                           â”‚   â”‚
â”‚  â”‚       reminder_timing: "24h",                            â”‚   â”‚
â”‚  â”‚       email_notifications: true,                         â”‚   â”‚
â”‚  â”‚       push_notifications: true                           â”‚   â”‚
â”‚  â”‚     }                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                     â”‚                                             â”‚
â”‚                     â†“                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Supabase Database                           â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚   notification_preferences                      â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   user_id: abc-123                              â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   reminders_enabled: true                       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   reminder_timing: "24h"                        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚   email_notifications: true                     â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Task Creation Flow                             â”‚
â”‚                                                                   â”‚
â”‚  User creates task â†’ POST /api/tasks                            â”‚
â”‚           â†“                                                       â”‚
â”‚  Save task to database                                          â”‚
â”‚           â†“                                                       â”‚
â”‚  Check: Google Calendar connected?                              â”‚
â”‚           â†“ YES                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  1. Fetch notification_preferences              â”‚             â”‚
â”‚  â”‚     â€¢ reminders_enabled: true                   â”‚             â”‚
â”‚  â”‚     â€¢ reminder_timing: "24h"                    â”‚             â”‚
â”‚  â”‚     â€¢ email_notifications: true                 â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â†“                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  2. Convert to Google Calendar format           â”‚             â”‚
â”‚  â”‚     reminder_timing: "24h" â†’ 1440 minutes       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â†“                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  3. Call Google Calendar API                    â”‚             â”‚
â”‚  â”‚                                                  â”‚             â”‚
â”‚  â”‚     calendar.events.insert({                    â”‚             â”‚
â”‚  â”‚       summary: "ğŸ“š Learning React",             â”‚             â”‚
â”‚  â”‚       start: { date: "2025-11-15" },           â”‚             â”‚
â”‚  â”‚       reminders: {                              â”‚             â”‚
â”‚  â”‚         overrides: [                            â”‚             â”‚
â”‚  â”‚           { method: "popup", minutes: 1440 },   â”‚             â”‚
â”‚  â”‚           { method: "email", minutes: 1440 }    â”‚             â”‚
â”‚  â”‚         ]                                        â”‚             â”‚
â”‚  â”‚       }                                          â”‚             â”‚
â”‚  â”‚     })                                           â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â†“                                                       â”‚
â”‚  âœ… Task created with user's notification preferences           â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Google Calendar                               â”‚
â”‚                                                                   â”‚
â”‚  ğŸ“… DigiGyan Learning Tasks                                     â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  ğŸ“š Learning React                              â”‚             â”‚
â”‚  â”‚  Friday, November 15, 2025                      â”‚             â”‚
â”‚  â”‚                                                  â”‚             â”‚
â”‚  â”‚  ğŸ”” Reminders:                                  â”‚             â”‚
â”‚  â”‚  â€¢ Popup: 1 day before (Thu 12:00 AM)          â”‚             â”‚
â”‚  â”‚  â€¢ Email: 1 day before (Thu 12:00 AM)          â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              When Reminder Time Arrives                          â”‚
â”‚                                                                   â”‚
â”‚  Thursday, November 14, 2025 at 12:00 AM                        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Google sends:                                  â”‚             â”‚
â”‚  â”‚                                                  â”‚             â”‚
â”‚  â”‚  ğŸ“± POPUP NOTIFICATION                          â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚             â”‚
â”‚  â”‚  â”‚ ğŸ“š Learning React                 â”‚          â”‚             â”‚
â”‚  â”‚  â”‚ Due tomorrow                      â”‚          â”‚             â”‚
â”‚  â”‚  â”‚                                   â”‚          â”‚             â”‚
â”‚  â”‚  â”‚  [View]  [Dismiss]  [Snooze]     â”‚          â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚             â”‚
â”‚  â”‚                                                  â”‚             â”‚
â”‚  â”‚  ğŸ“§ EMAIL NOTIFICATION                          â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚             â”‚
â”‚  â”‚  â”‚ From: Google Calendar             â”‚          â”‚             â”‚
â”‚  â”‚  â”‚ Subject: Reminder: Learning React â”‚          â”‚             â”‚
â”‚  â”‚  â”‚                                   â”‚          â”‚             â”‚
â”‚  â”‚  â”‚ Tomorrow at all day               â”‚          â”‚             â”‚
â”‚  â”‚  â”‚ ğŸ“š Learning React                 â”‚          â”‚             â”‚
â”‚  â”‚  â”‚                                   â”‚          â”‚             â”‚
â”‚  â”‚  â”‚ DigiGyan Learning Task            â”‚          â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                   â”‚
â”‚  Notification arrives on:                                        â”‚
â”‚  â€¢ User's phone ğŸ“±                                               â”‚
â”‚  â€¢ User's computer ğŸ’»                                            â”‚
â”‚  â€¢ User's tablet ğŸ“±                                              â”‚
â”‚  â€¢ User's smartwatch âŒš                                          â”‚
â”‚  â€¢ User's email ğŸ“§                                               â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Update Preferences Flow

```
User changes timing from "1 day" to "15 minutes"
        â†“
Click "Save Changes"
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update notification_preferences table          â”‚
â”‚  SET reminder_timing = "15m"                    â”‚
â”‚  WHERE user_id = current_user                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
âœ… Preferences saved
        â†“
User creates new task
        â†“
System fetches preferences â†’ "15m"
        â†“
Converts to minutes â†’ 15
        â†“
Creates Google Calendar event with 15-minute reminder
        â†“
âœ… Done! Future tasks use new timing
```

---

## ğŸ”„ Update Existing Tasks Flow

```
User changes reminder timing
        â†“
Click "Sync Now" in Settings
        â†“
POST /api/calendar/sync
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Fetch notification preferences (new timing) â”‚
â”‚  2. Fetch all tasks from database               â”‚
â”‚  3. For each task:                              â”‚
â”‚     â€¢ Get Google Calendar event ID              â”‚
â”‚     â€¢ Update event with new reminder settings   â”‚
â”‚     â€¢ calendar.events.update(...)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
âœ… All existing tasks now have new timing
```

---

## ğŸ’¾ Database Structure

```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  notification_preferences                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id                      UUID PRIMARY KEY                â”‚
â”‚  user_id                 UUID â†’ auth.users              â”‚
â”‚  reminders_enabled       BOOLEAN (true/false)           â”‚
â”‚  reminder_timing         TEXT ('15m','1h','24h','3d')   â”‚
â”‚  email_notifications     BOOLEAN                         â”‚
â”‚  email_course_completion BOOLEAN                         â”‚
â”‚  email_weekly_summary    BOOLEAN                         â”‚
â”‚  email_recommendations   BOOLEAN                         â”‚
â”‚  push_notifications      BOOLEAN                         â”‚
â”‚  created_at              TIMESTAMPTZ                     â”‚
â”‚  updated_at              TIMESTAMPTZ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
         UNIQUE(user_id)
         One row per user
```

---

## ğŸ¯ Timing Conversion Reference

```
Frontend Value     â†’  Minutes  â†’  Google Calendar Display
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"15m"              â†’    15     â†’  "15 minutes before"
"1h"               â†’    60     â†’  "1 hour before"
"24h"              â†’   1440    â†’  "1 day before"
"3d"               â†’   4320    â†’  "3 days before"
```

---

## ğŸ”€ Different User Scenarios

### User A: Wants daily reminders
```
Settings:
  reminders_enabled: true
  reminder_timing: "24h"
  email_notifications: true

Result:
  ğŸ“± Popup: 1 day before
  ğŸ“§ Email: 1 day before
```

### User B: Only wants last-minute reminders
```
Settings:
  reminders_enabled: true
  reminder_timing: "15m"
  email_notifications: false

Result:
  ğŸ“± Popup: 15 minutes before
  âŒ No email
```

### User C: No reminders at all
```
Settings:
  reminders_enabled: false

Result:
  âŒ No popup
  âŒ No email
  âœ… Tasks still sync to calendar (visible but no alerts)
```

---

## ğŸŒ Multi-User Independence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User A              â”‚
â”‚  reminder: "24h"     â”‚
â”‚  email: true         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
    [Creates task]
           â”‚
           â†“
    24h reminder


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User B              â”‚
â”‚  reminder: "15m"     â”‚
â”‚  email: false        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
    [Creates task]
           â”‚
           â†“
    15m reminder (no email)


Each user's tasks use THEIR settings
Completely independent! ğŸ¯
```

---

## ğŸ”„ Real-Time Flow

```
Time: Monday 9:00 AM
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

User creates task: "Submit assignment"
Due: Friday 11:59 PM
Reminder setting: "1 day" (1440 minutes)

â†“

Google Calendar event created:
  Due: Friday 11:59 PM
  Reminder: Thursday 11:59 PM

â†“

Time: Thursday 11:59 PM
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Google Calendar triggers:
  ğŸ“± Popup notification on all devices
  ğŸ“§ Email to user's Gmail
  
User sees:
  "Submit assignment"
  "Due tomorrow at 11:59 PM"
  
User can:
  â€¢ Snooze for 1 hour
  â€¢ Dismiss
  â€¢ View in calendar
  â€¢ Mark as done
```

---

## ğŸ¨ Visual Legend

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Symbols Used in Diagrams            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†“     Flow direction                â”‚
â”‚  â†’     Transform/Convert             â”‚
â”‚  âœ…     Success/Enabled               â”‚
â”‚  âŒ     Disabled/Not available        â”‚
â”‚  ğŸ“±     Mobile notification           â”‚
â”‚  ğŸ“§     Email notification            â”‚
â”‚  ğŸ“…     Calendar                      â”‚
â”‚  ğŸ””     Reminder/Alert                â”‚
â”‚  ğŸ“š     Task/Learning activity        â”‚
â”‚  ğŸ’¾     Database                      â”‚
â”‚  âš™ï¸     Settings                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Quick Reference: API Endpoints

```
GET  /api/notifications/preferences
â†’ Fetch user's notification settings

PATCH /api/notifications/preferences  
â†’ Update user's notification settings

POST /api/tasks
â†’ Create task (auto-syncs with user's preferences)

PATCH /api/tasks/[id]
â†’ Update task (auto-syncs with user's preferences)

POST /api/calendar/sync
â†’ Bulk sync all tasks with current preferences

PUT /api/calendar/sync?taskId=[id]
â†’ Sync single task with current preferences
```

---

## ğŸ“Š Data Flow Summary

```
Frontend Settings
       â†“
  API Request
       â†“
   Database (notification_preferences)
       â†“
Task Operations (create/update/sync)
       â†“
Fetch Preferences
       â†“
Google Calendar Service
       â†“
Google Calendar API
       â†“
Google's Servers
       â†“
User's Devices (notifications)
```

---

**End of Flow Diagram** ğŸ‰

